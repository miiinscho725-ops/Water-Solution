<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Water Solution Research Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    * {
      box-sizing: border-box;
    }
    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .slide-in {
      animation: slideIn 0.3s ease-out;
    }
    @keyframes slideIn {
      from { 
        opacity: 0;
        transform: translateY(10px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-emerald-50">
  <div id="app"></div>
  
  <script>

    const SUPABASE_URL = 'https://bpwjkgrmzpxppubjaisz.supabase.co';  // 1-4ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ URL
    const SUPABASE_ANON_KEY = 'sb_publishable_6lO03_v4mOOTHC4xG4RqQA_2MXt8RVE'; // 1-4ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Key

    // ========== Configuration ==========
    const config = {
      site_title: "Water Solution",
      site_tagline: "Solving Water Pollution Problems",
      primary_color: "#047857",
      accent_color: "#0891b2",
      button_color: "#059669",
      surface_color: "#ffffff",
      text_color: "#1f2937"
    };

    // ========== State Management ==========
    let currentLang = 'kr';
    let currentView = 'home';
    let selectedMethod = null;
    let selectedProject = null;
    let editingProject = false;
    let editingMethod = null;
    
    let projects = [
      {
        id: 'proj_1',
        title: 'í•˜ì²œ ìˆ˜ì§ˆ ê°œì„  í”„ë¡œì íŠ¸',
        author: 'ê¹€ì—°êµ¬',
        date: '2024-01-15',
        views: 127,
        status: 'completed',
        content: 'ë³¸ í”„ë¡œì íŠ¸ëŠ” ë„ì‹¬ í•˜ì²œì˜ ìˆ˜ì§ˆ ê°œì„ ì„ ëª©í‘œë¡œ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒë¬¼í•™ì  ì²˜ë¦¬ì™€ ê³ ê¸‰ì‚°í™” ê³µì •ì„ ê²°í•©í•˜ì—¬ COD ì œê±°ìœ¨ 85% ì´ìƒì„ ë‹¬ì„±í•˜ì˜€ìœ¼ë©°, ì˜ì–‘ì—¼ë¥˜ ì œê±°ì—ë„ íƒì›”í•œ íš¨ê³¼ë¥¼ ë³´ì˜€ìŠµë‹ˆë‹¤.\n\nì£¼ìš” ì„±ê³¼:\n- COD ì œê±°ìœ¨: 85% ì´ìƒ\n- ì´ì§ˆì†Œ ì œê±°ìœ¨: 78%\n- ì´ì¸ ì œê±°ìœ¨: 92%\n\në³¸ ì—°êµ¬ ê²°ê³¼ëŠ” ì‹¤ì œ í•˜ì²œ ìˆ˜ì§ˆ ê°œì„  ì‚¬ì—…ì— ì ìš©ë  ì˜ˆì •ì…ë‹ˆë‹¤.',
        imageUrl: 'https://images.unsplash.com/photo-1569163139394-de4798aa62b6?w=800',
        pdfUrl: ''
      },
      {
        id: 'proj_2',
        title: 'ì‚°ì—…íìˆ˜ ì²˜ë¦¬ ê¸°ìˆ  ê°œë°œ',
        author: 'ì´ë°•ì‚¬',
        date: '2024-02-20',
        views: 95,
        status: 'ongoing',
        content: 'ì„¬ìœ  ì‚°ì—…íìˆ˜ì˜ ìƒ‰ë„ ì œê±°ë¥¼ ìœ„í•œ í¡ì°©-ì‚°í™” ê²°í•© ê³µì •ì„ ê°œë°œí•˜ê³  ìˆìŠµë‹ˆë‹¤. í™œì„±íƒ„ í¡ì°© í›„ ì˜¤ì¡´ ì²˜ë¦¬ë¥¼ í†µí•´ ìƒ‰ë„ 95% ì´ìƒ ì œê±°ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.\n\ní˜„ì¬ ì§„í–‰ ìƒí™©:\n- ì‹¤í—˜ì‹¤ ê·œëª¨ í…ŒìŠ¤íŠ¸ ì™„ë£Œ\n- íŒŒì¼ëŸ¿ í”ŒëœíŠ¸ ì„¤ê³„ ì§„í–‰ ì¤‘\n- 2024ë…„ 4ì›” íŒŒì¼ëŸ¿ í…ŒìŠ¤íŠ¸ ì˜ˆì •',
        imageUrl: '',
        pdfUrl: ''
      }
    ];

    // ========== Helper Functions ==========
    function t(kr, en) {
      return currentLang === 'kr' ? kr : en;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text || '';
      return div.innerHTML;
    }

    // ========== Toast Notifications ==========
    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      const colors = {
        success: 'bg-emerald-600',
        error: 'bg-red-600',
        info: 'bg-blue-600'
      };
      
      toast.className = `fixed bottom-6 right-6 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 fade-in`;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // ========== Navigation Functions ==========
    window.navigateTo = function(view) {
      currentView = view;
      selectedMethod = null;
      selectedProject = null;
      editingProject = false;
      render();
    };

    window.switchLang = function() {
      currentLang = currentLang === 'kr' ? 'en' : 'kr';
      render();
    };

    window.viewMethodDetail = function(sectorId, methodId) {
      selectedMethod = { sectorId, methodId };
      render();
    };

    window.clearMethodSelection = function() {
      selectedMethod = null;
      editingMethod = false;
      render();
    };

    window.startMethodEdit = function() {
      editingMethod = true;
      render();
    };

    window.cancelMethodEdit = function() {
      editingMethod = false;
      render();
    };

    window.saveMethodEdit = function(event) {
      event.preventDefault();
      showToast(t('ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'Changes have been saved'), 'success');
      editingMethod = false;
      render();
    };

    window.viewProjectDetail = function(id) {
      selectedProject = id;
      const projectIndex = projects.findIndex(p => p.id === id);
      if (projectIndex !== -1) {
        projects[projectIndex].views += 1;
      }
      render();
    };

    window.clearProjectSelection = function() {
      selectedProject = null;
      editingProject = false;
      render();
    };

    window.startProjectEdit = function() {
      editingProject = true;
      render();
    };

    window.cancelProjectEdit = function() {
      editingProject = false;
      render();
    };

    // ========== Render Navigation ==========
    function renderNav() {
      return `
        <nav class="w-full shadow-sm" style="background: ${config.surface_color};">
          <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold cursor-pointer hover:opacity-80 transition" onclick="navigateTo('home')" style="color: ${config.primary_color};">
              ${escapeHtml(config.site_title)}
            </h1>
            <div class="flex gap-6 items-center">
              <button onclick="navigateTo('home')" class="hover:opacity-70 transition font-medium text-sm" style="color: ${currentView === 'home' ? config.primary_color : config.text_color};">
                ${t('ê¸°ê´€ ì†Œê°œ', 'About')}
              </button>
              <button onclick="navigateTo('research_areas')" class="hover:opacity-70 transition font-medium text-sm" style="color: ${currentView === 'research_areas' ? config.primary_color : config.text_color};">
                ${t('ì—°êµ¬ ë¶„ì•¼', 'Research Areas')}
              </button>
              <button onclick="navigateTo('projects')" class="hover:opacity-70 transition font-medium text-sm" style="color: ${currentView === 'projects' ? config.primary_color : config.text_color};">
                ${t('í”„ë¡œì íŠ¸', 'Projects')}
              </button>
              <button onclick="navigateTo('contact')" class="hover:opacity-70 transition font-medium text-sm" style="color: ${currentView === 'contact' ? config.primary_color : config.text_color};">
                ${t('ë¬¸ì˜', 'Contact')}
              </button>
              <button onclick="switchLang()" class="px-4 py-2 rounded-lg transition text-sm" style="background: ${config.button_color}; color: white;">
                ${currentLang === 'kr' ? 'EN' : 'í•œê¸€'}
              </button>
            </div>
          </div>
        </nav>
      `;
    }

    // ========== Render Home Page ==========
    function renderHomePage() {
      return `
        <div class="w-full min-h-screen">
          ${renderNav()}
          
          <!-- Hero Section -->
          <div class="w-full py-24" style="background: linear-gradient(135deg, ${config.primary_color}, ${config.accent_color});">
            <div class="max-w-7xl mx-auto px-6 text-center">
              <h2 class="text-5xl font-bold mb-6 text-white">
                ${escapeHtml(config.site_tagline)}
              </h2>
              <p class="text-xl text-white opacity-90 mb-8">
                ${t('í˜ì‹ ì ì¸ ìˆ˜ì§ˆ ì •í™” ê¸°ìˆ ë¡œ ë” ê¹¨ë—í•œ ë¯¸ë˜ë¥¼ ë§Œë“­ë‹ˆë‹¤', 'Creating a cleaner future with innovative water purification technology')}
              </p>
              <div class="flex gap-4 justify-center">
                <button onclick="navigateTo('research_areas')" class="px-8 py-4 rounded-lg font-semibold transition shadow-lg hover:shadow-xl" style="background: white; color: ${config.primary_color};">
                  ${t('ì—°êµ¬ ë¶„ì•¼ ë³´ê¸°', 'View Research')}
                </button>
                <button onclick="navigateTo('contact')" class="px-8 py-4 rounded-lg font-semibold transition border-2 border-white text-white hover:bg-white" style="hover:color: ${config.primary_color};">
                  ${t('ë¬¸ì˜í•˜ê¸°', 'Contact Us')}
                </button>
              </div>
            </div>
          </div>

          <!-- About Section -->
          <div class="max-w-7xl mx-auto px-6 py-20">
            <div class="text-center mb-16">
              <h3 class="text-4xl font-bold mb-4" style="color: ${config.primary_color};">
                ${t('ìš°ë¦¬ ì—°êµ¬ì†Œë¥¼ ì†Œê°œí•©ë‹ˆë‹¤', 'About Our Institute')}
              </h3>
              <p class="text-lg opacity-70" style="color: ${config.text_color};">
                ${t('ìˆ˜ì§ˆ ê°œì„ ê³¼ í™˜ê²½ ë³´í˜¸ë¥¼ ìœ„í•œ ì„ ë„ì  ì—°êµ¬ ê¸°ê´€', 'Leading research institution for water quality improvement and environmental protection')}
              </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mb-16">
              <div class="rounded-2xl shadow-lg p-8" style="background: ${config.surface_color};">
                <div class="text-4xl mb-4">ğŸ¯</div>
                <h4 class="text-2xl font-bold mb-4" style="color: ${config.primary_color};">
                  ${t('ìš°ë¦¬ì˜ ë¯¸ì…˜', 'Our Mission')}
                </h4>
                <p class="text-base leading-relaxed" style="color: ${config.text_color};">
                  ${t(
                    'ê³¼í•™ì  ì—°êµ¬ì™€ ê¸°ìˆ  í˜ì‹ ì„ í†µí•´ ì „ ì„¸ê³„ ìˆ˜ìì›ì˜ ì§€ì† ê°€ëŠ¥í•œ ê´€ë¦¬ì— ê¸°ì—¬í•˜ê³ , ê¹¨ë—í•œ ë¬¼ì— ëŒ€í•œ ì ‘ê·¼ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.',
                    'Contributing to sustainable management of global water resources through scientific research and technological innovation, improving access to clean water.'
                  )}
                </p>
              </div>

              <div class="rounded-2xl shadow-lg p-8" style="background: ${config.surface_color};">
                <div class="text-4xl mb-4">ğŸ”­</div>
                <h4 class="text-2xl font-bold mb-4" style="color: ${config.primary_color};">
                  ${t('ìš°ë¦¬ì˜ ë¹„ì „', 'Our Vision')}
                </h4>
                <p class="text-base leading-relaxed" style="color: ${config.text_color};">
                  ${t(
                    '2030ë…„ê¹Œì§€ ì•„ì‹œì•„-íƒœí‰ì–‘ ì§€ì—­ ìµœê³ ì˜ ìˆ˜ì§ˆ ì—°êµ¬ ê¸°ê´€ì´ ë˜ì–´, ê¸°í›„ ë³€í™”ì™€ ì¸êµ¬ ì¦ê°€ë¡œ ì¸í•œ ë¬¼ ë¶€ì¡± ë¬¸ì œ í•´ê²°ì˜ ì„ ë‘ì£¼ìê°€ ë˜ê² ìŠµë‹ˆë‹¤.',
                    'To become the leading water quality research institution in the Asia-Pacific region by 2030, pioneering solutions to water scarcity caused by climate change and population growth.'
                  )}
                </p>
              </div>
            </div>

            <!-- Statistics -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-16">
              <div class="text-center p-8 rounded-xl shadow-lg" style="background: linear-gradient(135deg, ${config.primary_color}15, ${config.primary_color}05);">
                <div class="text-5xl font-bold mb-3" style="color: ${config.primary_color};">15+</div>
                <div class="text-lg font-semibold" style="color: ${config.text_color};">${t('í˜‘ë ¥ êµ­ê°€', 'Partner Countries')}</div>
                <p class="text-sm mt-2 opacity-70" style="color: ${config.text_color};">${t('ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬', 'Global Network')}</p>
              </div>
              <div class="text-center p-8 rounded-xl shadow-lg" style="background: linear-gradient(135deg, ${config.accent_color}15, ${config.accent_color}05);">
                <div class="text-5xl font-bold mb-3" style="color: ${config.accent_color};">127</div>
                <div class="text-lg font-semibold" style="color: ${config.text_color};">${t('ì™„ë£Œëœ í”„ë¡œì íŠ¸', 'Completed Projects')}</div>
                <p class="text-sm mt-2 opacity-70" style="color: ${config.text_color};">${t('ì„±ê³µì ì¸ ìˆ˜í–‰', 'Successfully Executed')}</p>
              </div>
              <div class="text-center p-8 rounded-xl shadow-lg" style="background: linear-gradient(135deg, ${config.primary_color}15, ${config.primary_color}05);">
                <div class="text-5xl font-bold mb-3" style="color: ${config.primary_color};">230+</div>
                <div class="text-lg font-semibold" style="color: ${config.text_color};">${t('ì—°êµ¬ ë…¼ë¬¸', 'Research Papers')}</div>
                <p class="text-sm mt-2 opacity-70" style="color: ${config.text_color};">${t('í•™ìˆ  ê¸°ì—¬', 'Academic Contributions')}</p>
              </div>
              <div class="text-center p-8 rounded-xl shadow-lg" style="background: linear-gradient(135deg, ${config.accent_color}15, ${config.accent_color}05);">
                <div class="text-5xl font-bold mb-3" style="color: ${config.accent_color};">5+</div>
                <div class="text-lg font-semibold" style="color: ${config.text_color};">${t('ì—°êµ¬ì§„', 'Researchers')}</div>
                <p class="text-sm mt-2 opacity-70" style="color: ${config.text_color};">${t('ì „ë¬¸ ì¸ë ¥', 'Expert Team')}</p>
              </div>
            </div>

            <!-- Key Achievements -->
            <div class="rounded-2xl shadow-lg p-10 mb-16" style="background: ${config.surface_color};">
              <h3 class="text-3xl font-bold mb-8 text-center" style="color: ${config.primary_color};">
                ${t('ì£¼ìš” ì„±ê³¼', 'Key Achievements')}
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-6 rounded-xl border-l-4" style="background: ${config.primary_color}05; border-color: ${config.primary_color};">
                  <div class="text-5xl mb-4">ğŸŒ</div>
                  <h4 class="text-xl font-bold mb-3" style="color: ${config.accent_color};">
                    ${t('ê¸€ë¡œë²Œ í˜‘ë ¥', 'Global Collaboration')}
                  </h4>
                  <p class="leading-relaxed" style="color: ${config.text_color};">
                    ${t(
                      'ì•„ì‹œì•„, ìœ ëŸ½, ì•„í”„ë¦¬ì¹´ 15ê°œêµ­ ì´ìƒì˜ ì—°êµ¬ ê¸°ê´€ ë° ì •ë¶€ì™€ ìˆ˜ì§ˆ ê°œì„  í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                      'Conducting water quality improvement projects with research institutions and governments in over 15 countries across Asia, Europe, and Africa.'
                    )}
                  </p>
                </div>

                <div class="p-6 rounded-xl border-l-4" style="background: ${config.accent_color}05; border-color: ${config.accent_color};">
                  <div class="text-5xl mb-4">ğŸ”¬</div>
                  <h4 class="text-xl font-bold mb-3" style="color: ${config.accent_color};">
                    ${t('í˜ì‹  ê¸°ìˆ ', 'Innovative Technology')}
                  </h4>
                  <p class="leading-relaxed" style="color: ${config.text_color};">
                    ${t(
                      'ê³ ê¸‰ì‚°í™”, ìƒë¬¼í•™ì  ì²˜ë¦¬, í¡ì°© ê³µì • ë“± ìµœì²¨ë‹¨ ìˆ˜ì²˜ë¦¬ ê¸°ìˆ ì„ ê°œë°œí•˜ì—¬ ë‚œë¶„í•´ì„± ì˜¤ì—¼ë¬¼ì§ˆ ì œê±°ìœ¨ 95% ì´ìƒì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.',
                      'Developed cutting-edge water treatment technologies including advanced oxidation, biological treatment, and adsorption processes, achieving over 95% removal of refractory pollutants.'
                    )}
                  </p>
                </div>

                <div class="p-6 rounded-xl border-l-4" style="background: ${config.primary_color}05; border-color: ${config.primary_color};">
                  <div class="text-5xl mb-4">ğŸ†</div>
                  <h4 class="text-xl font-bold mb-3" style="color: ${config.accent_color};">
                    ${t('êµ­ì œ ì¸ì •', 'International Recognition')}
                  </h4>
                  <p class="leading-relaxed" style="color: ${config.text_color};">
                    ${t(
                      'ISO 17025 ì¸ì¦ íšë“ ë° êµ­ì œ í•™ìˆ ì§€ì— 230í¸ ì´ìƒì˜ ë…¼ë¬¸ì„ ê²Œì¬í•˜ë©°, ìˆ˜ì§ˆ ë¶„ì„ ë¶„ì•¼ì˜ ì„ ë„ì  ì—°êµ¬ ê¸°ê´€ìœ¼ë¡œ ì¸ì •ë°›ê³  ìˆìŠµë‹ˆë‹¤.',
                      'Recognized as a leading research institution in water quality analysis with ISO 17025 certification and over 230 papers published in international journals.'
                    )}
                  </p>
                </div>
              </div>
            </div>

            <!-- Research Focus -->
            <div class="rounded-2xl shadow-lg p-10" style="background: linear-gradient(135deg, ${config.primary_color}10, ${config.accent_color}10);">
              <h3 class="text-3xl font-bold mb-8 text-center" style="color: ${config.primary_color};">
                ${t('ì—°êµ¬ ì¤‘ì  ë¶„ì•¼', 'Research Focus Areas')}
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex gap-4 p-4 rounded-lg" style="background: ${config.surface_color};">
                  <div class="text-3xl">ğŸ’§</div>
                  <div>
                    <h5 class="font-bold mb-2" style="color: ${config.primary_color};">${t('ìˆ˜ì§ˆ íŠ¹ì„± ë¶„ì„', 'Water Quality Analysis')}</h5>
                    <p class="text-sm" style="color: ${config.text_color};">${t('BOD, COD, ì˜ì–‘ì—¼ë¥˜, ì¤‘ê¸ˆì† ë“± ì •ë°€ ì¸¡ì •', 'Precise measurement of BOD, COD, nutrients, heavy metals')}</p>
                  </div>
                </div>
                <div class="flex gap-4 p-4 rounded-lg" style="background: ${config.surface_color};">
                  <div class="text-3xl">ğŸ§ª</div>
                  <div>
                    <h5 class="font-bold mb-2" style="color: ${config.primary_color};">${t('ê³ ê¸‰ ìˆ˜ì²˜ë¦¬ ê¸°ìˆ ', 'Advanced Treatment')}</h5>
                    <p class="text-sm" style="color: ${config.text_color};">${t('ìƒë¬¼í•™ì  ì²˜ë¦¬, ì‘ì§‘, í¡ì°©, ê³ ê¸‰ì‚°í™”', 'Biological treatment, coagulation, adsorption, AOP')}</p>
                  </div>
                </div>
                <div class="flex gap-4 p-4 rounded-lg" style="background: ${config.surface_color};">
                  <div class="text-3xl">ğŸŒ±</div>
                  <div>
                    <h5 class="font-bold mb-2" style="color: ${config.primary_color};">${t('ì§€ì†ê°€ëŠ¥ ìˆ˜ìì› ê´€ë¦¬', 'Sustainable Management')}</h5>
                    <p class="text-sm" style="color: ${config.text_color};">${t('ê¸°í›„ë³€í™” ëŒ€ì‘ ë° ë¬¼ ìˆœí™˜ ì‹œìŠ¤í…œ', 'Climate change adaptation and water cycle systems')}</p>
                  </div>
                </div>
                <div class="flex gap-4 p-4 rounded-lg" style="background: ${config.surface_color};">
                  <div class="text-3xl">ğŸ”</div>
                  <div>
                    <h5 class="font-bold mb-2" style="color: ${config.primary_color};">${t('ì‹ ê·œ ì˜¤ì—¼ë¬¼ì§ˆ ì—°êµ¬', 'Emerging Contaminants')}</h5>
                    <p class="text-sm" style="color: ${config.text_color};">${t('ë¯¸ì„¸í”Œë¼ìŠ¤í‹±, ì˜ì•½í’ˆ, ë‚´ë¶„ë¹„ê³„ êµë€ë¬¼ì§ˆ', 'Microplastics, pharmaceuticals, endocrine disruptors')}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // ========== Render Research Areas ==========
    function renderResearchAreasPage() {
      const researchSectors = [
        {
          id: 'characterization',
          title: { kr: 'ìˆ˜ì§ˆ íŠ¹ì„± ë¶„ì„', en: 'Water Quality Characterization' },
          methods: [
            {
              id: 'bod_cod',
              name: { kr: 'BOD/COD ì¸¡ì •', en: 'BOD/COD Measurement' },
              description: { 
                kr: 'ìˆ˜ì¤‘ ìœ ê¸°ë¬¼ í•¨ëŸ‰ì„ ì •ëŸ‰í™”í•˜ì—¬ ì˜¤ì—¼ ì •ë„ë¥¼ í‰ê°€í•©ë‹ˆë‹¤.',
                en: 'Quantify organic matter content in water to assess pollution levels.'
              },
              details: {
                kr: 'BOD(ìƒí™”í•™ì  ì‚°ì†Œ ìš”êµ¬ëŸ‰)ëŠ” 5ì¼ê°„ ë¯¸ìƒë¬¼ì˜ ì‚°ì†Œ ì†Œë¹„ëŸ‰ì„ ì¸¡ì •í•˜ë©°, COD(í™”í•™ì  ì‚°ì†Œ ìš”êµ¬ëŸ‰)ëŠ” ê°•ì‚°í™”ì œë¡œ ì‚°í™” ê°€ëŠ¥í•œ ë¬¼ì§ˆëŸ‰ì„ ì¸¡ì •í•©ë‹ˆë‹¤.',
                en: 'BOD measures microbial oxygen consumption over 5 days, while COD measures oxidizable substances using strong oxidizing agents.'
              }
            },
            {
              id: 'nutrients',
              name: { kr: 'ì˜ì–‘ì—¼ë¥˜ ë¶„ì„', en: 'Nutrient Analysis' },
              description: { 
                kr: 'ì§ˆì†Œ(N)ì™€ ì¸(P) ë†ë„ë¥¼ ì¸¡ì •í•˜ì—¬ ë¶€ì˜ì–‘í™” ìœ„í—˜ì„ í‰ê°€í•©ë‹ˆë‹¤.',
                en: 'Measure nitrogen (N) and phosphorus (P) concentrations to assess eutrophication risk.'
              },
              details: {
                kr: 'ì´ì§ˆì†Œ(TN)ëŠ” ìì™¸ì„  í¡ê´‘ë„ë²•, ì´ì¸(TP)ì€ ì•„ìŠ¤ì½”ë¥´ë¹ˆì‚° í™˜ì›ë²•ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.',
                en: 'Total nitrogen (TN) is analyzed by UV spectrophotometry, total phosphorus (TP) by ascorbic acid reduction method.'
              }
            },
            {
              id: 'suspended_solids',
              name: { kr: 'ë¶€ìœ ë¬¼ì§ˆ ì¸¡ì •', en: 'Suspended Solids Measurement' },
              description: { 
                kr: 'ìˆ˜ì¤‘ ë¶€ìœ  ì…ìì˜ ì–‘ì„ ì •ëŸ‰í•˜ì—¬ íƒë„ ì›ì¸ì„ íŒŒì•…í•©ë‹ˆë‹¤.',
                en: 'Quantify suspended particles in water to identify causes of turbidity.'
              },
              details: {
                kr: 'ì¼ì •ëŸ‰ì˜ ì‹œë£Œë¥¼ ì—¬ê³¼ì§€ë¡œ ì—¬ê³¼í•œ í›„ ê±´ì¡°Â·í•­ëŸ‰í•˜ì—¬ ë¶€ìœ ë¬¼ì§ˆ(SS) ë†ë„ë¥¼ ì‚°ì¶œí•©ë‹ˆë‹¤.',
                en: 'Filter a fixed volume of sample through filter paper, then dry and weigh to calculate SS concentration.'
              }
            },
            {
              id: 'heavy_metals',
              name: { kr: 'ì¤‘ê¸ˆì† ë¶„ì„', en: 'Heavy Metal Analysis' },
              description: { 
                kr: 'ë‚©, ì¹´ë“œë®´, ìˆ˜ì€ ë“± ìœ í•´ ì¤‘ê¸ˆì† ë†ë„ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.',
                en: 'Measure concentrations of toxic heavy metals like lead, cadmium, and mercury.'
              },
              details: {
                kr: 'ICP-MS ë˜ëŠ” ì›ìí¡ê´‘ê´‘ë„ë²•ìœ¼ë¡œ ë¯¸ëŸ‰ ì¤‘ê¸ˆì†ì„ ì •ë°€ ë¶„ì„í•©ë‹ˆë‹¤.',
                en: 'Precisely analyze trace heavy metals using ICP-MS or atomic absorption spectrophotometry.'
              }
            }
          ]
        },
        {
          id: 'treatment',
          title: { kr: 'ì˜¤ì—¼ ë¬¼ì§ˆ ì²˜ë¦¬', en: 'Pollutant Treatment' },
          methods: [
            {
              id: 'biological',
              name: { kr: 'ìƒë¬¼í•™ì  ì²˜ë¦¬', en: 'Biological Treatment' },
              description: { 
                kr: 'ë¯¸ìƒë¬¼ì„ ì´ìš©í•´ ìœ ê¸°ë¬¼ê³¼ ì˜ì–‘ì—¼ë¥˜ë¥¼ ì œê±°í•©ë‹ˆë‹¤.',
                en: 'Remove organic matter and nutrients using microorganisms.'
              },
              details: {
                kr: 'í™œì„±ìŠ¬ëŸ¬ì§€ë²•, ìƒë¬¼ë§‰ë²•(MBBR) ë“±ì„ ì‹¤í—˜ì‹¤ ê·œëª¨ ë°˜ì‘ì¡°ì—ì„œ ìš´ì „í•©ë‹ˆë‹¤.',
                en: 'Operate activated sludge, biofilm (MBBR) processes in lab-scale reactors.'
              }
            },
            {
              id: 'coagulation',
              name: { kr: 'ì‘ì§‘Â·ì¹¨ì „', en: 'Coagulation-Sedimentation' },
              description: { 
                kr: 'ì…ìì„± ë¬¼ì§ˆê³¼ ì½œë¡œì´ë“œë¥¼ ì‘ì§‘ì‹œì¼œ ì¹¨ì „ ì œê±°í•©ë‹ˆë‹¤.',
                en: 'Aggregate particulate matter and colloids for sedimentation removal.'
              },
              details: {
                kr: 'í™©ì‚°ì•Œë£¨ë¯¸ëŠ„, ì—¼í™”ì²  ë“± ì‘ì§‘ì œë¥¼ íˆ¬ì…í•˜ê³  jar-testë¥¼ í†µí•´ ìµœì  ì¡°ê±´ì„ ë„ì¶œí•©ë‹ˆë‹¤.',
                en: 'Add coagulants like aluminum sulfate and ferric chloride, determining optimal conditions through jar tests.'
              }
            },
            {
              id: 'adsorption',
              name: { kr: 'í¡ì°©', en: 'Adsorption' },
              description: { 
                kr: 'í™œì„±íƒ„ì´ë‚˜ í¡ì°©ì œë¥¼ ì´ìš©í•´ ë‚œë¶„í•´ì„± ìœ ê¸°ë¬¼ì„ ì œê±°í•©ë‹ˆë‹¤.',
                en: 'Remove refractory organic compounds using activated carbon or adsorbents.'
              },
              details: {
                kr: 'ë¶„ë§Â·ì…ìƒí™œì„±íƒ„, ì´ì˜¨êµí™˜ìˆ˜ì§€ ë“± ë‹¤ì–‘í•œ í¡ì°©ì œë¥¼ í‰ê°€í•©ë‹ˆë‹¤.',
                en: 'Evaluate various adsorbents including powdered/granular activated carbon and ion exchange resins.'
              }
            },
            {
              id: 'oxidation',
              name: { kr: 'ê³ ê¸‰ì‚°í™”', en: 'Advanced Oxidation' },
              description: { 
                kr: 'ê°•ë ¥í•œ ì‚°í™”ë ¥ìœ¼ë¡œ ë‚œë¶„í•´ì„± ìœ ê¸°ë¬¼ì„ ë¶„í•´í•©ë‹ˆë‹¤.',
                en: 'Decompose refractory organic compounds with strong oxidation power.'
              },
              details: {
                kr: 'ì˜¤ì¡´, ê³¼ì‚°í™”ìˆ˜ì†Œ, UV ì¡°ì‚¬ ë“±ì„ ì¡°í•©í•˜ì—¬ OH ë¼ë””ì¹¼ì„ ìƒì„±ì‹œí‚µë‹ˆë‹¤.',
                en: 'Generate OH radicals using ozone, hydrogen peroxide, UV irradiation in combination.'
              }
            }
          ]
        }
      ];

      if (selectedMethod) {
        let method = null;
        let sectorTitle = '';
        
        for (const sector of researchSectors) {
          if (selectedMethod.sectorId === sector.id) {
            sectorTitle = currentLang === 'kr' ? sector.title.kr : sector.title.en;
            method = sector.methods.find(m => m.id === selectedMethod.methodId);
            break;
          }
        }

        if (!method) {
          selectedMethod = null;
          return renderResearchAreasPage();
        }

        if (editingMethod) {
          return `
            <div class="w-full min-h-screen">
              ${renderNav()}
              
              <div class="max-w-4xl mx-auto px-6 py-8">
                <button onclick="cancelMethodEdit()" class="flex items-center gap-2 mb-6 hover:opacity-70 transition text-sm" style="color: ${config.accent_color};">
                  <span>â†</span>
                  <span>${t('ì·¨ì†Œ', 'Cancel')}</span>
                </button>
                
                <div class="rounded-2xl shadow-lg p-8" style="background: ${config.surface_color};">
                  <h2 class="text-3xl font-bold mb-6" style="color: ${config.primary_color};">
                    ${t('ì—°êµ¬ ë°©ë²• í¸ì§‘', 'Edit Research Method')}
                  </h2>
                  
                  <form onsubmit="saveMethodEdit(event)" class="space-y-6">
                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ë°©ë²•ëª… (í•œê¸€)', 'Method Name (Korean)')}
                      </label>
                      <input type="text" id="edit-method-name-kr" value="${escapeHtml(method.name.kr)}" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ë°©ë²•ëª… (ì˜ë¬¸)', 'Method Name (English)')}
                      </label>
                      <input type="text" id="edit-method-name-en" value="${escapeHtml(method.name.en)}" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ì„¤ëª… (í•œê¸€)', 'Description (Korean)')}
                      </label>
                      <textarea id="edit-method-desc-kr" rows="3" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">${escapeHtml(method.description.kr)}</textarea>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ì„¤ëª… (ì˜ë¬¸)', 'Description (English)')}
                      </label>
                      <textarea id="edit-method-desc-en" rows="3" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">${escapeHtml(method.description.en)}</textarea>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ìƒì„¸ ë‚´ìš© (í•œê¸€)', 'Details (Korean)')}
                      </label>
                      <textarea id="edit-method-details-kr" rows="6" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">${escapeHtml(method.details.kr)}</textarea>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ìƒì„¸ ë‚´ìš© (ì˜ë¬¸)', 'Details (English)')}
                      </label>
                      <textarea id="edit-method-details-en" rows="6" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">${escapeHtml(method.details.en)}</textarea>
                    </div>

                    <div class="flex gap-3 justify-end">
                      <button type="button" onclick="cancelMethodEdit()" class="px-6 py-2 rounded-lg transition" style="background: #9ca3af; color: white;">
                        ${t('ì·¨ì†Œ', 'Cancel')}
                      </button>
                      <button type="submit" class="px-6 py-2 rounded-lg transition shadow" style="background: ${config.button_color}; color: white;">
                        ${t('ì €ì¥', 'Save')}
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          `;
        }

        return `
          <div class="w-full min-h-screen">
            ${renderNav()}
            
            <div class="max-w-4xl mx-auto px-6 py-8">
              <button onclick="clearMethodSelection()" class="flex items-center gap-2 mb-6 hover:opacity-70 transition text-sm" style="color: ${config.accent_color};">
                <span>â†</span>
                <span>${t('ì—°êµ¬ ë¶„ì•¼ë¡œ ëŒì•„ê°€ê¸°', 'Back to Research Areas')}</span>
              </button>
              
              <div class="rounded-2xl shadow-lg p-8" style="background: ${config.surface_color};">
                <div class="flex justify-between items-start mb-6">
                  <div>
                    <p class="text-sm mb-2 opacity-70" style="color: ${config.accent_color};">
                      ${escapeHtml(sectorTitle)}
                    </p>
                    <h2 class="text-3xl font-bold" style="color: ${config.primary_color};">
                      ${escapeHtml(currentLang === 'kr' ? method.name.kr : method.name.en)}
                    </h2>
                  </div>
                  <button onclick="startMethodEdit()" class="px-4 py-2 rounded-lg transition shadow text-sm" style="background: ${config.accent_color}; color: white;">
                    ${t('í¸ì§‘', 'Edit')}
                  </button>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h3 class="text-xl font-semibold mb-3" style="color: ${config.accent_color};">
                      ${t('ê°œìš”', 'Overview')}
                    </h3>
                    <p class="text-base leading-relaxed" style="color: ${config.text_color};">
                      ${escapeHtml(currentLang === 'kr' ? method.description.kr : method.description.en)}
                    </p>
                  </div>

                  <div>
                    <h3 class="text-xl font-semibold mb-3" style="color: ${config.accent_color};">
                      ${t('ìƒì„¸ ì •ë³´', 'Detailed Information')}
                    </h3>
                    <p class="text-base leading-relaxed" style="color: ${config.text_color};">
                      ${escapeHtml(currentLang === 'kr' ? method.details.kr : method.details.en)}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      return `
        <div class="w-full min-h-screen">
          ${renderNav()}
          
          <div class="w-full py-16" style="background: linear-gradient(135deg, ${config.primary_color}, ${config.accent_color});">
            <div class="max-w-6xl mx-auto px-6 text-center">
              <h2 class="text-3xl font-bold mb-4 text-white">
                ${t('ì—°êµ¬ ë¶„ì•¼', 'Research Areas')}
              </h2>
              <p class="text-lg text-white opacity-90">
                ${t('ìˆ˜ì§ˆ ì˜¤ì—¼ ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì²´ê³„ì ì¸ ì—°êµ¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤', 'We conduct systematic research to solve water pollution problems')}
              </p>
            </div>
          </div>

          <div class="max-w-6xl mx-auto px-6 py-16">
            ${researchSectors.map(sector => `
              <div class="mb-12 slide-in">
                <h3 class="text-2xl font-bold mb-6" style="color: ${config.accent_color};">
                  ${escapeHtml(currentLang === 'kr' ? sector.title.kr : sector.title.en)}
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                  ${sector.methods.map(method => `
                    <div onclick="viewMethodDetail('${sector.id}', '${method.id}')" class="rounded-xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition" style="background: ${config.surface_color};">
                      <h4 class="text-xl font-semibold mb-3" style="color: ${config.primary_color};">
                        ${escapeHtml(currentLang === 'kr' ? method.name.kr : method.name.en)}
                      </h4>
                      <p class="text-sm opacity-80" style="color: ${config.text_color};">
                        ${escapeHtml(currentLang === 'kr' ? method.description.kr : method.description.en)}
                      </p>
                      <div class="mt-4 flex items-center gap-2 text-sm" style="color: ${config.accent_color};">
                        <span>${t('ìì„¸íˆ ë³´ê¸°', 'View Details')}</span>
                        <span>â†’</span>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    // ========== Render Projects ==========
    function renderProjectsPage() {
      // í”„ë¡œì íŠ¸ ìƒì„¸ë³´ê¸°
      if (selectedProject) {
        const project = projects.find(p => p.id === selectedProject);
        
        if (!project) {
          selectedProject = null;
          return renderProjectsPage();
        }

        // í¸ì§‘ ëª¨ë“œ
        if (editingProject) {
          return `
            <div class="w-full min-h-screen">
              ${renderNav()}
              
              <div class="max-w-4xl mx-auto px-6 py-8">
                <button onclick="cancelProjectEdit()" class="flex items-center gap-2 mb-6 hover:opacity-70 transition text-sm" style="color: ${config.accent_color};">
                  <span>â†</span>
                  <span>${t('ì·¨ì†Œ', 'Cancel')}</span>
                </button>
                
                <div class="rounded-2xl shadow-lg p-8" style="background: ${config.surface_color};">
                  <h2 class="text-3xl font-bold mb-6" style="color: ${config.primary_color};">
                    ${t('í”„ë¡œì íŠ¸ í¸ì§‘', 'Edit Project')}
                  </h2>
                  
                  <form onsubmit="saveProjectEdit(event, '${project.id}')" class="space-y-6">
                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ì œëª©', 'Title')} *
                      </label>
                      <input type="text" id="edit-project-title" value="${escapeHtml(project.title)}" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ì‘ì„±ì', 'Author')} *
                        </label>
                        <input type="text" id="edit-project-author" value="${escapeHtml(project.author)}" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                      </div>

                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ë‚ ì§œ', 'Date')} *
                        </label>
                        <input type="date" id="edit-project-date" value="${escapeHtml(project.date)}" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                      </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ì¡°íšŒìˆ˜', 'Views')}
                        </label>
                        <input type="number" id="edit-project-views" value="${project.views}" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                      </div>

                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ìƒíƒœ', 'Status')} *
                        </label>
                        <select id="edit-project-status" class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                          <option value="ongoing" ${project.status === 'ongoing' ? 'selected' : ''}>${t('ì§„í–‰ì¤‘', 'Ongoing')}</option>
                          <option value="completed" ${project.status === 'completed' ? 'selected' : ''}>${t('ì™„ë£Œ', 'Completed')}</option>
                        </select>
                      </div>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ë‚´ìš©', 'Content')} *
                      </label>
                      <textarea id="edit-project-content" rows="8" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">${escapeHtml(project.content)}</textarea>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ì´ë¯¸ì§€ URL (ì„ íƒì‚¬í•­)', 'Image URL (Optional)')}
                      </label>
                      <input type="url" id="edit-project-image" value="${escapeHtml(project.imageUrl)}" placeholder="https://example.com/image.jpg" class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('PDF URL (ì„ íƒì‚¬í•­)', 'PDF URL (Optional)')}
                      </label>
                      <input type="url" id="edit-project-pdf" value="${escapeHtml(project.pdfUrl)}" placeholder="https://example.com/document.pdf" class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                    </div>

                    <div class="flex gap-3 justify-end">
                      <button type="button" onclick="cancelProjectEdit()" class="px-6 py-2 rounded-lg transition" style="background: #9ca3af; color: white;">
                        ${t('ì·¨ì†Œ', 'Cancel')}
                      </button>
                      <button type="submit" class="px-6 py-2 rounded-lg transition shadow" style="background: ${config.button_color}; color: white;">
                        ${t('ì €ì¥', 'Save')}
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          `;
        }

        // ìƒì„¸ë³´ê¸° ëª¨ë“œ
        return `
          <div class="w-full min-h-screen">
            ${renderNav()}
            
            <div class="max-w-4xl mx-auto px-6 py-8">
              <button onclick="clearProjectSelection()" class="flex items-center gap-2 mb-6 hover:opacity-70 transition text-sm" style="color: ${config.accent_color};">
                <span>â†</span>
                <span>${t('í”„ë¡œì íŠ¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°', 'Back to Projects')}</span>
              </button>
              
              <div class="rounded-2xl shadow-lg p-8" style="background: ${config.surface_color};">
                <div class="flex justify-between items-start mb-6">
                  <div class="flex-1">
                    <div class="flex items-center gap-4 mb-4">
                      <span class="px-4 py-2 rounded-full text-base font-semibold whitespace-nowrap" style="background: ${project.status === 'completed' ? '#10b981' : '#f59e0b'}20; color: ${project.status === 'completed' ? '#10b981' : '#f59e0b'};">
                        ${project.status === 'completed' ? t('ì™„ë£Œ', 'Completed') : t('ì§„í–‰ì¤‘', 'Ongoing')}
                      </span>
                      <h2 class="text-3xl font-bold" style="color: ${config.primary_color};">
                        ${escapeHtml(project.title)}
                      </h2>
                    </div>
                    <div class="flex gap-6 items-center opacity-70" style="color: ${config.text_color};">
                      <span class="text-base">ğŸ‘¤ ${escapeHtml(project.author)}</span>
                      <span class="text-base">ğŸ“… ${escapeHtml(project.date)}</span>
                      <span class="text-base">ğŸ‘ï¸ ${project.views}</span>
                    </div>
                  </div>
                  <button onclick="startProjectEdit()" class="px-4 py-2 rounded-lg transition shadow text-sm" style="background: ${config.accent_color}; color: white;">
                    ${t('í¸ì§‘', 'Edit')}
                  </button>
                </div>
                
                <div class="space-y-6">
                  <div>
                    <h3 class="text-xl font-semibold mb-3" style="color: ${config.accent_color};">
                      ${t('í”„ë¡œì íŠ¸ ë‚´ìš©', 'Project Content')}
                    </h3>
                    <p class="text-base leading-relaxed whitespace-pre-wrap" style="color: ${config.text_color};">
                      ${escapeHtml(project.content)}
                    </p>
                  </div>

                  ${project.imageUrl ? `
                    <div>
                      <h3 class="text-xl font-semibold mb-3" style="color: ${config.accent_color};">
                        ${t('í”„ë¡œì íŠ¸ ì´ë¯¸ì§€', 'Project Image')}
                      </h3>
                      <img src="${escapeHtml(project.imageUrl)}" alt="Project Image" class="w-full rounded-lg shadow" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                      <p style="display:none; padding: 2rem; text-align: center; color: ${config.text_color};" class="text-sm">${t('ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'Image failed to load')}</p>
                    </div>
                  ` : ''}

                  ${project.pdfUrl ? `
                    <div>
                      <h3 class="text-xl font-semibold mb-3" style="color: ${config.accent_color};">
                        ${t('í”„ë¡œì íŠ¸ ë¬¸ì„œ', 'Project Document')}
                      </h3>
                      <div class="border-2 rounded-lg p-4" style="border-color: ${config.primary_color}40;">
                        <iframe src="${escapeHtml(project.pdfUrl)}" class="w-full rounded" style="height: 600px;"></iframe>
                      </div>
                    </div>
                  ` : ''}
                </div>
              </div>
            </div>
          </div>
        `;
      }

      // í”„ë¡œì íŠ¸ ëª©ë¡
      return `
        <div class="w-full min-h-screen">
          ${renderNav()}
          
          <div class="w-full py-16" style="background: linear-gradient(135deg, ${config.primary_color}, ${config.accent_color});">
            <div class="max-w-6xl mx-auto px-6 text-center">
              <h2 class="text-3xl font-bold mb-4 text-white">
                ${t('í”„ë¡œì íŠ¸', 'Projects')}
              </h2>
              <p class="text-lg text-white opacity-90">
                ${t('ì§„í–‰ ì¤‘ì´ê±°ë‚˜ ì™„ë£Œëœ ìˆ˜ì§ˆ ê´€ë ¨ ì—°êµ¬ í”„ë¡œì íŠ¸ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤', 'Introducing ongoing and completed water quality research projects')}
              </p>
            </div>
          </div>

          <div class="max-w-6xl mx-auto px-6 py-16">
            <div class="mb-8 flex justify-end">
              <button onclick="showNewProjectForm()" class="px-6 py-3 rounded-lg transition shadow font-semibold" style="background: ${config.button_color}; color: white;">
                âœï¸ ${t('ê¸€ì“°ê¸°', 'Write New')}
              </button>
            </div>

            <div class="space-y-4">
              ${projects.map(project => `
                <div onclick="viewProjectDetail('${project.id}')" class="rounded-2xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition slide-in" style="background: ${config.surface_color};">
                  <div class="flex justify-between items-center">
                    <div class="flex items-center gap-4 flex-1">
                      <span class="px-3 py-1 rounded-full text-sm font-semibold whitespace-nowrap" style="background: ${project.status === 'completed' ? '#10b981' : '#f59e0b'}20; color: ${project.status === 'completed' ? '#10b981' : '#f59e0b'};">
                        ${project.status === 'completed' ? t('ì™„ë£Œ', 'Completed') : t('ì§„í–‰ì¤‘', 'Ongoing')}
                      </span>
                      <h3 class="text-2xl font-bold" style="color: ${config.primary_color};">
                        ${escapeHtml(project.title)}
                      </h3>
                    </div>
                    <div class="flex gap-6 items-center">
                      <span class="text-base" style="color: ${config.text_color};">ğŸ‘¤ ${escapeHtml(project.author)}</span>
                      <span class="text-base" style="color: ${config.text_color};">ğŸ“… ${escapeHtml(project.date)}</span>
                      <span class="text-base" style="color: ${config.text_color};">ğŸ‘ï¸ ${project.views}</span>
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    // ========== Render Contact ==========
    function renderContactPage() {
      return `
        <div class="w-full min-h-screen">
          ${renderNav()}
          
          <!-- Hero Section -->
          <div class="w-full py-20" style="background: linear-gradient(135deg, ${config.primary_color}, ${config.accent_color});">
            <div class="max-w-6xl mx-auto px-6 text-center">
              <h2 class="text-4xl font-bold mb-4 text-white">
                ${t('ë¬¸ì˜í•˜ê¸°', 'Contact Us')}
              </h2>
              <p class="text-lg text-white opacity-90">
                ${t('ì—°êµ¬ í˜‘ë ¥ ë° ê¸°ìˆ  ë¬¸ì˜ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤', 'We welcome research collaboration and technical inquiries')}
              </p>
            </div>
          </div>

          <div class="max-w-7xl mx-auto px-6 py-16">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
              <!-- Contact Information -->
              <div>
                <h3 class="text-3xl font-bold mb-8" style="color: ${config.primary_color};">
                  ${t('ì—°ë½ì²˜ ì •ë³´', 'Contact Information')}
                </h3>
                
                <div class="space-y-6 mb-10">
                  <div class="flex gap-4 p-6 rounded-xl shadow-lg" style="background: ${config.surface_color};">
                    <div class="flex-shrink-0">
                      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: ${config.primary_color};">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-bold mb-2 text-lg" style="color: ${config.text_color};">
                        ${t('ì£¼ì†Œ', 'Address')}
                      </h4>
                      <p style="color: ${config.text_color}; opacity: 0.8;">
                        ${t('ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123', '123 Teheran-ro, Gangnam-gu, Seoul')}<br>
                        ${t('Water Solution ì—°êµ¬ì†Œ ë³¸ê´€ 5ì¸µ', 'Water Solution Research Institute, Main Building 5F')}
                      </p>
                    </div>
                  </div>

                  <div class="flex gap-4 p-6 rounded-xl shadow-lg" style="background: ${config.surface_color};">
                    <div class="flex-shrink-0">
                      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: ${config.primary_color};">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-bold mb-2 text-lg" style="color: ${config.text_color};">
                        ${t('ì „í™”', 'Phone')}
                      </h4>
                      <p style="color: ${config.text_color}; opacity: 0.8;">
                        ${t('ëŒ€í‘œì „í™”', 'Main')}: +82-2-1234-5678<br>
                        ${t('íŒ©ìŠ¤', 'Fax')}: +82-2-1234-5679
                      </p>
                    </div>
                  </div>

                  <div class="flex gap-4 p-6 rounded-xl shadow-lg" style="background: ${config.surface_color};">
                    <div class="flex-shrink-0">
                      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: ${config.primary_color};">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-bold mb-2 text-lg" style="color: ${config.text_color};">
                        ${t('ì´ë©”ì¼', 'Email')}
                      </h4>
                      <p style="color: ${config.text_color}; opacity: 0.8;">
                        ${t('ì¼ë°˜ ë¬¸ì˜', 'General')}: contact@watersolution.org<br>
                        ${t('ì—°êµ¬ í˜‘ë ¥', 'Research')}: research@watersolution.org
                      </p>
                    </div>
                  </div>

                  <div class="flex gap-4 p-6 rounded-xl shadow-lg" style="background: ${config.surface_color};">
                    <div class="flex-shrink-0">
                      <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: ${config.primary_color};">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                    </div>
                    <div>
                      <h4 class="font-bold mb-2 text-lg" style="color: ${config.text_color};">
                        ${t('ìš´ì˜ ì‹œê°„', 'Business Hours')}
                      </h4>
                      <p style="color: ${config.text_color}; opacity: 0.8;">
                        ${t('í‰ì¼', 'Weekdays')}: 09:00 - 18:00<br>
                        ${t('ì£¼ë§ ë° ê³µíœ´ì¼ íœ´ë¬´', 'Closed on weekends and holidays')}
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Quick Links -->
                <div class="rounded-xl shadow-lg p-6" style="background: linear-gradient(135deg, ${config.primary_color}10, ${config.accent_color}10);">
                  <h4 class="font-bold mb-4 text-xl" style="color: ${config.primary_color};">
                    ${t('ë°”ë¡œê°€ê¸°', 'Quick Links')}
                  </h4>
                  <div class="space-y-2">
                    <button onclick="navigateTo('research_areas')" class="w-full text-left px-4 py-3 rounded-lg hover:shadow transition" style="background: ${config.surface_color}; color: ${config.text_color};">
                      ğŸ“š ${t('ì—°êµ¬ ë¶„ì•¼ ë³´ê¸°', 'View Research Areas')}
                    </button>
                    <button onclick="navigateTo('projects')" class="w-full text-left px-4 py-3 rounded-lg hover:shadow transition" style="background: ${config.surface_color}; color: ${config.text_color};">
                      ğŸ“Š ${t('í”„ë¡œì íŠ¸ ë³´ê¸°', 'View Projects')}
                    </button>
                  </div>
                </div>
              </div>

              <!-- Contact Form -->
              <div>
                <div class="rounded-xl shadow-lg p-8" style="background: ${config.surface_color};">
                  <h3 class="text-3xl font-bold mb-6" style="color: ${config.primary_color};">
                    ${t('ì˜¨ë¼ì¸ ë¬¸ì˜', 'Online Inquiry')}
                  </h3>
                  
                  <form onsubmit="handleContactSubmit(event)" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ì´ë¦„', 'Name')} *
                        </label>
                        <input type="text" required class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;" placeholder="${t('í™ê¸¸ë™', 'John Doe')}">
                      </div>
                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ì†Œì†', 'Organization')}
                        </label>
                        <input type="text" class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;" placeholder="${t('ì†Œì† ê¸°ê´€', 'Your Organization')}">
                      </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ì´ë©”ì¼', 'Email')} *
                        </label>
                        <input type="email" required class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;" placeholder="example@email.com">
                      </div>
                      <div>
                        <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                          ${t('ì „í™”ë²ˆí˜¸', 'Phone')}
                        </label>
                        <input type="tel" class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;" placeholder="010-1234-5678">
                      </div>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ë¬¸ì˜ ìœ í˜•', 'Inquiry Type')} *
                      </label>
                      <select required class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                        <option value="">${t('ì„ íƒí•´ì£¼ì„¸ìš”', 'Please select')}</option>
                        <option value="research">${t('ì—°êµ¬ í˜‘ë ¥', 'Research Collaboration')}</option>
                        <option value="technical">${t('ê¸°ìˆ  ë¬¸ì˜', 'Technical Inquiry')}</option>
                        <option value="partnership">${t('íŒŒíŠ¸ë„ˆì‹­', 'Partnership')}</option>
                        <option value="other">${t('ê¸°íƒ€', 'Other')}</option>
                      </select>
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ì œëª©', 'Subject')} *
                      </label>
                      <input type="text" required class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;" placeholder="${t('ë¬¸ì˜ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”', 'Enter inquiry subject')}">
                    </div>

                    <div>
                      <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                        ${t('ë¬¸ì˜ ë‚´ìš©', 'Message')} *
                      </label>
                      <textarea rows="6" required class="w-full px-4 py-3 rounded-lg border-2" style="border-color: ${config.primary_color}40;" placeholder="${t('ë¬¸ì˜ ë‚´ìš©ì„ ìƒì„¸íˆ ì…ë ¥í•´ì£¼ì„¸ìš”', 'Please enter your message in detail')}"></textarea>
                    </div>

                    <div class="flex items-start gap-2">
                      <input type="checkbox" id="privacy-check" required class="mt-1">
                      <label for="privacy-check" class="text-sm" style="color: ${config.text_color};">
                        ${t('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤', 'I agree to the collection and use of personal information')}
                      </label>
                    </div>

                    <button type="submit" class="w-full py-4 rounded-lg transition shadow-lg font-bold text-lg hover:shadow-xl" style="background: ${config.button_color}; color: white;">
                      ${t('ë¬¸ì˜ ë³´ë‚´ê¸°', 'Send Inquiry')}
                    </button>
                  </form>

                  <p class="mt-6 text-sm text-center opacity-70" style="color: ${config.text_color};">
                    ${t('ì˜ì—…ì¼ ê¸°ì¤€ 1-2ì¼ ë‚´ì— ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤', 'We will respond within 1-2 business days')}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // ========== Handle Contact Form ==========
    window.handleContactSubmit = function(event) {
      event.preventDefault();
      showToast(t('ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.', 'Your inquiry has been received. We will respond shortly.'), 'success');
      event.target.reset();
    };

    // ========== Project Form Functions ==========
    window.showNewProjectForm = function() {
      const modal = document.createElement('div');
      modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
      modal.innerHTML = `
        <div class="rounded-2xl shadow-2xl p-8 max-w-3xl w-full max-h-[90vh] overflow-y-auto" style="background: ${config.surface_color};">
          <h2 class="text-3xl font-bold mb-6" style="color: ${config.primary_color};">
            ${t('ìƒˆ í”„ë¡œì íŠ¸ ì‘ì„±', 'Write New Project')}
          </h2>
          
          <form id="new-project-form" class="space-y-6">
            <div>
              <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                ${t('ì œëª©', 'Title')} *
              </label>
              <input type="text" id="new-project-title" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                  ${t('ì‘ì„±ì', 'Author')} *
                </label>
                <input type="text" id="new-project-author" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
              </div>

              <div>
                <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                  ${t('ë‚ ì§œ', 'Date')} *
                </label>
                <input type="date" id="new-project-date" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;" value="${new Date().toISOString().split('T')[0]}">
              </div>
            </div>

            <div>
              <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                ${t('ìƒíƒœ', 'Status')} *
              </label>
              <select id="new-project-status" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
                <option value="ongoing">${t('ì§„í–‰ì¤‘', 'Ongoing')}</option>
                <option value="completed">${t('ì™„ë£Œ', 'Completed')}</option>
              </select>
            </div>

            <div>
              <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                ${t('ë‚´ìš©', 'Content')} *
              </label>
              <textarea id="new-project-content" rows="8" required class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;"></textarea>
            </div>

            <div>
              <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                ${t('ì´ë¯¸ì§€ URL (ì„ íƒ)', 'Image URL (Optional)')}
              </label>
              <input type="url" id="new-project-image" class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
            </div>

            <div>
              <label class="block mb-2 font-semibold" style="color: ${config.text_color};">
                ${t('PDF URL (ì„ íƒ)', 'PDF URL (Optional)')}
              </label>
              <input type="url" id="new-project-pdf" class="w-full px-4 py-2 rounded-lg border-2" style="border-color: ${config.primary_color}40;">
            </div>

            <div class="flex gap-3 justify-end pt-4">
              <button type="button" onclick="this.closest('.fixed').remove()" class="px-6 py-3 rounded-lg transition" style="background: #9ca3af; color: white;">
                ${t('ì·¨ì†Œ', 'Cancel')}
              </button>
              <button type="submit" class="px-6 py-3 rounded-lg transition shadow font-semibold" style="background: ${config.button_color}; color: white;">
                ${t('ì €ì¥í•˜ê¸°', 'Save')}
              </button>
            </div>
          </form>
        </div>
      `;
      
      modal.querySelector('#new-project-form').addEventListener('submit', (e) => {
        e.preventDefault();
        
        const newProject = {
          id: 'proj_' + Date.now(),
          title: document.getElementById('new-project-title').value,
          author: document.getElementById('new-project-author').value,
          date: document.getElementById('new-project-date').value,
          views: 0,
          status: document.getElementById('new-project-status').value,
          content: document.getElementById('new-project-content').value,
          imageUrl: document.getElementById('new-project-image').value.trim(),
          pdfUrl: document.getElementById('new-project-pdf').value.trim()
        };
        
        projects.unshift(newProject);
        modal.remove();
        showToast(t('í”„ë¡œì íŠ¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'Project has been saved'), 'success');
        render();
      });
      
      document.body.appendChild(modal);
    };

    window.saveProjectEdit = function(event, projectId) {
      event.preventDefault();
      
      const projectIndex = projects.findIndex(p => p.id === projectId);
      if (projectIndex === -1) return;
      
      projects[projectIndex] = {
        ...projects[projectIndex],
        title: document.getElementById('edit-project-title').value,
        author: document.getElementById('edit-project-author').value,
        date: document.getElementById('edit-project-date').value,
        views: parseInt(document.getElementById('edit-project-views').value) || 0,
        status: document.getElementById('edit-project-status').value,
        content: document.getElementById('edit-project-content').value,
        imageUrl: document.getElementById('edit-project-image').value.trim(),
        pdfUrl: document.getElementById('edit-project-pdf').value.trim()
      };

      showToast(t('ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'Changes have been saved'), 'success');
      editingProject = false;
      render();
    };

    // ========== Main Render Function ==========
    function render() {
      const app = document.getElementById('app');
      
      if (currentView === 'home') {
        app.innerHTML = renderHomePage();
      } else if (currentView === 'research_areas') {
        app.innerHTML = renderResearchAreasPage();
      } else if (currentView === 'projects') {
        app.innerHTML = renderProjectsPage();
      } else if (currentView === 'contact') {
        app.innerHTML = renderContactPage();
      }
    }

    // ========== Initialize ==========
    render();
  </script>
</body>
</html>